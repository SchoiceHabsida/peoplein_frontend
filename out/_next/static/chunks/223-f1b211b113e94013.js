(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{3911:function(e,l,n){"use strict";n.r(l),n.d(l,{ApplicantForm:function(){return _},LANGUAGES_QUERY:function(){return B},SKILLS_QUERY:function(){return M},VISAS_QUERY:function(){return P}});var t,a,i,s,r=n(2805),c=n(9268),o=n(2425),d=n(7056),u=n(7251),m=n(1051),p=n(9700),h=n(6008),f=n(5596),x=n(1309),v=n(9651);(t=i||(i={})).FRONTEND="FRONTEND",t.BACKEND="BACKEND";var g=n(8811);(a=s||(s={})).MALE="MALE",a.FEMALE="FEMALE";let j=[{label:"Male",value:s.MALE},{label:"Female",value:s.FEMALE}],N=[{label:"FRONTEND",value:"FRONTEND"},{label:"BACKEND",value:"BACKEND"}];var b=n(6006),w=n(4676),k=n(6732),y=n(353);let A=y.Ry().shape({firstName:y.Z_().required("This field is required"),lastName:y.Z_().required("This field is required"),email:y.Z_().required("This field is required").email("This field must be valid email")}),E=y.Ry().shape({additionalSkills:y.IX().of(y.Ry().shape({skillName:y.Z_().ensure().required("Name is required")})),additionalLanguages:y.IX().of(y.Ry().shape({languageName:y.Z_().ensure().required("Name is required")}))});n(7705);let C=()=>(0,c.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M20 12L4 12",stroke:"#2A353D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),D=()=>(0,c.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:"M12 4V20",stroke:"#2A353D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,c.jsx)("path",{d:"M4 12H20",stroke:"#2A353D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});var S=n(8656);function L(){let e=(0,r._)(["\n    mutation ($input: ApplicantInput, ",") {\n      ","(input: $input,  ",") {\n        id\n      }\n    }\n  "]);return L=function(){return e},e}function O(){let e=(0,r._)(["\n    query languages {\n        getAllLanguages {\n            languageName\n          }\n    } \n"]);return O=function(){return e},e}function R(){let e=(0,r._)(["\n    query skills {\n        getAllSkills {\n            skillName\n            skillType\n        }\n    }\n"]);return R=function(){return e},e}function T(){let e=(0,r._)(["\n    query visas {\n        getAllVisas\n    }\n"]);return T=function(){return e},e}let I=(e,l)=>(0,d.Ps)(L(),l?"$id: ID!":"",e,l?"id: $id":""),B=(0,d.Ps)(O()),M=(0,d.Ps)(R()),P=(0,d.Ps)(T()),_=()=>{var e,l,n,t,a,s;let{id:r}=(0,h.useParams)(),d=(0,h.useRouter)(),[y,L]=(0,b.useState)(),[O,R]=(0,b.useState)(),[T,{loading:_}]=(0,u.D)(I(r?"updateApplicantById":"createApplicant",r)),{data:F}=(0,m.a)(B),{data:q}=(0,m.a)(M),{data:W}=(0,m.a)(P),{data:z}=(0,m.a)(S.S,{variables:{id:r},skip:!r,fetchPolicy:"no-cache"}),{control:V,handleSubmit:Y,register:H,setValue:G,watch:U,reset:K,formState:{errors:Z}}=(0,p.cI)({defaultValues:{firstName:"",lastName:"",country:"",degree:"",resumeGoogleDrivePath:"",gender:"",description:"",email:"",experience:[{company:"",startOfWork:""}],certificates:[{acquisitionDate:"",certificateName:""}]},resolver:(0,k.X)(A),mode:"onBlur"}),{fields:$,append:X,remove:Q}=(0,p.Dq)({name:"experience",control:V}),{fields:J,append:ee,remove:el}=(0,p.Dq)({name:"certificates",control:V}),{control:en,setValue:et,watch:ea,getValues:ei}=(0,p.cI)({defaultValues:{additionalSkills:[],additionalLanguages:[]},mode:"onBlur",resolver:(0,k.X)(E)}),{fields:es,append:er,remove:ec}=(0,p.Dq)({name:"additionalSkills",control:en}),{fields:eo,append:ed,remove:eu}=(0,p.Dq)({name:"additionalLanguages",control:en}),em=e=>Array.isArray(e)&&e.length?e:[],ep=e=>{var l,n,t;console.log("values",e);let a=ei();null===(l=e.experience[0])||void 0===l||delete l.endOfWOrk,null===(n=e.experience[0])||void 0===n||delete n.id,null===(t=e.certificates[0])||void 0===t||delete t.id,delete e.id,delete e.profilePicture,e.skills=[...em(null==e?void 0:e.skills),...a.additionalSkills],e.languages=[...em(null==e?void 0:e.languages),...a.additionalLanguages],T({variables:{input:{...(0,w.eC)((0,w.oV)({...e})),profilePicture:y||void 0,resume:O||void 0},id:r}}).then(e=>d.push("".concat(f.j2).concat(f.rM,"/").concat(f.dk))).catch(e=>console.log(e))};return(0,b.useEffect)(()=>{(null==z?void 0:z.getApplicantById)&&r&&K(z.getApplicantById)},[z]),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsxs)("form",{onSubmit:Y(ep),className:"form-wrapper mb-2",children:[(0,c.jsxs)("div",{className:"form-fields rounded",children:[(0,c.jsxs)("div",{className:"upload-actions flex",children:[(0,c.jsx)("div",{className:"user-photo h-full",children:(0,c.jsx)(v.w,{onChange:e=>L(e),imagePath:null===(e=null==z?void 0:z.getApplicantById.profilePicture)||void 0===e?void 0:e.path})}),(0,c.jsx)("div",{className:"user-logo h-full flex-grow"})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-4 mt-2",children:[(0,c.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,c.jsxs)("div",{className:"w-1/2 flex gap-4 items-end",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"firstName",control:V,placeholder:"First name",label:"Full name"})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"lastName",control:V,placeholder:"Last name"})})]}),(0,c.jsx)("div",{className:"w-1/2"})]}),(0,c.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(x.z,{label:"Birthday",onChange:e=>{G("dateOfBirth",e.toLocaleString())},value:U().dateOfBirth})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"country",control:V,placeholder:"Nationality",label:"Nationality"})})]}),(0,c.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(g.A,{label:"Gender",value:j.find(e=>e.value===U().gender)||"",options:j,onChange:e=>G("gender",e.value)})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"email",control:V,placeholder:"Email",label:"Email address"})})]}),(0,c.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(g.A,{label:"Specialization",multiple:!0,value:(null===(l=U().specialization)||void 0===l?void 0:l.map(e=>N.find(l=>l.value===e)))||[],options:N,onChange:e=>G("specialization",e.map(e=>e.value))})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(g.A,{label:"Visa",value:(null==W?void 0:W.getAllVisas.map(e=>({value:e,label:e})).find(e=>e.value===U().visa))||"",options:(null==W?void 0:W.getAllVisas.map(e=>({value:e,label:e})))||[],onChange:e=>G("visa",e.value)})})]}),(0,c.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"degree",control:V,placeholder:"Degree",label:"Degree"})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{name:"resumeGoogleDrivePath",control:V,placeholder:"Resume Google Drive",label:"Resume path"})})]}),(0,c.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,c.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,c.jsx)("div",{className:"flex-grow",children:(0,c.jsx)(g.A,{label:"Skills",multiple:!0,value:(null===(n=U().skills)||void 0===n?void 0:n.map(e=>({label:e.skillName,value:e.skillName})))||"",options:(null==q?void 0:null===(t=q.getAllSkills)||void 0===t?void 0:t.map(e=>({label:e.skillName,value:e.skillName})))||[],onChange:e=>{G("skills",e.map(e=>({...null==q?void 0:q.getAllSkills.find(l=>l.skillName===e.value),__typename:void 0})))}})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:()=>er({skillName:"",skillType:i.FRONTEND}),className:"add-btn p-2  text-sm",children:(0,c.jsx)(D,{})})})]}),(null==es?void 0:es.length)!==0&&es.map((e,l)=>(0,c.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,c.jsxs)("div",{className:"grow flex gap-2",children:[(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(g.A,{label:"Type",multiple:!1,value:{label:ea().additionalSkills[l].skillType,value:ea().additionalSkills[l].skillType},options:N,onChange:e=>{et("additionalSkills.".concat(l,".skillType"),e.value)}})}),(0,c.jsx)("div",{className:"w-1/2",children:(0,c.jsx)(o.e,{label:"Name",control:en,name:"additionalSkills.".concat(l,".skillName")})})]}),(0,c.jsx)("button",{type:"button",className:"remove-btn p-2 ",onClick:()=>ec(l),children:(0,c.jsx)(C,{})})]},e.id))]}),(0,c.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,c.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,c.jsx)("div",{className:"flex-grow",children:(0,c.jsx)(g.A,{label:"Languages",multiple:!0,value:(null===(a=U().languages)||void 0===a?void 0:a.map(e=>({label:e.languageName,value:e.languageName})))||"",options:(null==F?void 0:null===(s=F.getAllLanguages)||void 0===s?void 0:s.map(e=>({label:e.languageName,value:e.languageName})))||[],onChange:e=>{G("languages",e.map(e=>({...null==F?void 0:F.getAllLanguages.find(l=>l.languageName===e.value),__typename:void 0})))}})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:()=>ed({languageName:""}),className:"add-btn p-2 text-sm",children:(0,c.jsx)(D,{})})})]}),(null==eo?void 0:eo.length)!==0&&eo.map((e,l)=>(0,c.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,c.jsx)("div",{className:"grow flex gap-2",children:(0,c.jsx)("div",{className:"w-full",children:(0,c.jsx)(o.e,{label:"Name",control:en,name:"additionalLanguages.".concat(l,".languageName")})})}),(0,c.jsx)("button",{type:"button",className:"remove-btn p-2",onClick:()=>eu(l),children:(0,c.jsx)(C,{})})]},e.id))]}),(0,c.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,c.jsx)("div",{className:"font-medium",children:"Experience"}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:()=>X({company:"",startOfWork:""}),className:"add-btn p-2",children:(0,c.jsx)(D,{})})})]}),(0,c.jsx)("div",{className:"w-full flex flex-col items-center gap-4",children:$.map((e,l)=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Company",control:V,name:"experience.".concat(l,".company")})}),(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Start of work",control:V,name:"experience.".concat(l,".startOfWork")})}),(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"End of work",control:V,name:"experience.".concat(l,".endOfWOrk")})})]}),(0,c.jsxs)("div",{className:"flex items-end gap-4",children:[(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Years worked",control:V,name:"experience.".concat(l,".yearsWorked")})}),(0,c.jsxs)("div",{className:"w-2/3 flex items-end gap-4",children:[(0,c.jsx)("div",{className:"grow",children:(0,c.jsx)(o.e,{label:"Details",control:V,name:"experience.".concat(l,".details")})}),(0,c.jsx)("button",{type:"button",className:"remove-btn p-2",onClick:()=>Q(l),children:(0,c.jsx)(C,{})})]})]})]},e.id))}),(0,c.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,c.jsx)("div",{className:"font-medium",children:"Certificates"}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:()=>ee({certificateName:""}),className:"add-btn p-2",children:(0,c.jsx)(D,{})})})]}),(0,c.jsx)("div",{className:"w-full flex flex-col items-center gap-4",children:J.map((e,l)=>(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"flex items-end gap-4",children:[(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Name",control:V,name:"certificates.".concat(l,".certificateName")})}),(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Acquisition Date",control:V,name:"certificates.".concat(l,".acquisitionDate")})}),(0,c.jsx)("div",{className:"w-1/3",children:(0,c.jsx)(o.e,{label:"Expiry Date",control:V,name:"certificates.".concat(l,".expiryDate")})}),(0,c.jsx)("button",{className:"remove-btn p-2",type:"button",onClick:()=>el(l),children:(0,c.jsx)(C,{})})]})},e.id))}),(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsx)("label",{className:"font-medium inline-block",style:{marginBottom:"6px"},children:"Description"}),(0,c.jsx)("textarea",{...H("description"),rows:5,name:"description",className:"textarea-input rounded w-full bordered p-4"})]}),(0,c.jsxs)("div",{className:"upload-resume relative",children:[(0,c.jsx)("div",{children:(0,c.jsx)("input",{className:"w-full absolute opacity-0 cursor-pointer",type:"file",onChange:e=>{var l;return R((null===(l=e.target.files)||void 0===l?void 0:l[0])||null)}})}),(0,c.jsx)("div",{className:"flex gap-4",children:O?(0,c.jsx)("div",{className:"max-w-lg overflow-hidden h-6",children:O.name}):(0,c.jsx)("span",{children:"Upload Resume"})})]})]})]}),(0,c.jsxs)("div",{className:"form-actions w-full flex items-center mt-8 gap-4 justify-center",children:[(0,c.jsx)("button",{type:"button",onClick:()=>d.back(),className:"form-btn form-btn--1",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"form-btn form-btn--2",disabled:_,children:"Save"})]})]})})}},8656:function(e,l,n){"use strict";n.d(l,{S:function(){return s}});var t=n(2805),a=n(7056);function i(){let e=(0,t._)(["\n    query getApplicant ($id: ID!) {\n        getApplicantById (id: $id) {\n            id\n            profilePicture {\n                id\n                path\n                type\n            }\n            resume {\n                id\n                path\n                type\n            }\n            firstName\n            lastName\n            country\n            gender\n            visa\n            specialization\n            dateOfBirth\n            degree\n            yearsOfExperience\n            resumeGoogleDrivePath\n            languages {\n                languageName\n            }\n            skills {\n                skillName\n                skillType\n            }\n            experience {\n                id\n                company\n                startOfWork\n                endOfWork\n                details\n                yearsWorked\n            }\n            certificates {\n                id\n                certificateName\n                acquisitionDate\n                expiryDate\n            },\n            email\n            description\n        }\n    }\n"]);return i=function(){return e},e}let s=(0,a.Ps)(i())},8811:function(e,l,n){"use strict";n.d(l,{A:function(){return s}});var t=n(9268),a=n(6006),i=n(4749);n(2901);let s=e=>{let{onChange:l,value:n,multiple:s,options:r,label:c}=e,[o,d]=(0,a.useState)(n);return(0,a.useEffect)(()=>{d(n)},[n]),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium inline-block",style:{marginBottom:"6px"},children:c}),(0,t.jsx)(i.ZP,{instanceId:"instanceId",value:o,defaultValue:o,onChange:l,isMulti:s,options:r,className:"basic-multi-select",classNamePrefix:"select"})]})}},1309:function(e,l,n){"use strict";n.d(l,{z:function(){return r}});var t=n(9268),a=n(9977),i=n.n(a);n(7042);var s=n(4676);let r=e=>{let{value:l,onChange:n,label:a}=e,r=e=>{n((0,s.p6)(e))},o=(e,l)=>{var t;null===e&&n(void 0);let a=new Date(l.target.value);!isNaN(a.getTime())&&(null===(t=l.target.value)||void 0===t?void 0:t.length)>6&&n((0,s.p6)(a))};return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium inline-block",style:{marginBottom:"6px"},children:a}),(0,t.jsx)(i(),{selected:c(l),onChange:o,onSelect:r})]})},c=e=>{let l=new Date(e);return isNaN(l.getTime())?void 0:l}},2425:function(e,l,n){"use strict";n.d(l,{e:function(){return i}});var t=n(9268),a=n(9700);let i=e=>{let{control:l,name:n,label:i,...s}=e;return(0,t.jsx)(a.Qr,{name:n,control:l,render:e=>{let{field:{...l},fieldState:{error:n}}=e;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{children:[i&&(0,t.jsx)("label",{className:"font-medium  inline-block",style:{marginBottom:"6px"},children:i}),(0,t.jsx)("input",{...s,...l,className:"border-none outline-none border-r-4 py-2 px-4"})]}),(0,t.jsx)("small",{className:"absolute left-0",style:{color:"#BB251A"},children:(null==n?void 0:n.message)?null==n?void 0:n.message:null})]})}})}},4676:function(e,l,n){"use strict";n.d(l,{Fw:function(){return t},eC:function(){return function e(l){return l?"object"==typeof l?Array.isArray(l)?l.map(e):Object.fromEntries(Object.entries(l).map(l=>{let[n,t]=l;return[n,e(t)]})):""!==l?l:void 0:void 0}},oV:function(){return function e(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return l.map(l=>e(l));let n={};for(let t in l)"__typename"!==t&&(n[t]=e(l[t]));return n}},p6:function(){return a}});let t=e=>{if(!e)return"";{let l=new Date(e),n=new Date,t=n.getFullYear()-l.getFullYear(),a=n.getMonth()-l.getMonth();return(a<0||0===a&&n.getDate()<l.getDate())&&t--,t}};function a(e){var l=new Date(e),n=""+(l.getMonth()+1),t=""+l.getDate(),a=l.getFullYear();return n.length<2&&(n="0"+n),t.length<2&&(t="0"+t),[a,n,t].join("-")}},793:function(e,l,n){"use strict";var t,a,i,s,r,c,o,d;n.d(l,{Fz:function(){return t},GV:function(){return i},K$:function(){return s},Tb:function(){return u},ym:function(){return a}}),(r=t||(t={})).search="getAllApplicantsPaged",r.favorites="getAllFavouriteApplicants",r.interviews="getAllScheduledForInterview",r.filter="searchApplicantsByCriteria",(c=a||(a={})).search="search",c.favorites="favorites",c.interviews="interviews",(o=i||(i={})).FRONTEND="FRONTEND",o.BACKEND="BACKEND",(d=s||(s={})).ADMIN="ROLE_ADMIN",d.COMPANY="ROLE_COMPANY";let u=419430400},5596:function(e,l,n){"use strict";n.d(l,{t3:function(){return x},OF:function(){return v.OF},Tb:function(){return g.Tb},zb:function(){return h},j2:function(){return a},rR:function(){return s},Yi:function(){return f},eH:function(){return p},rM:function(){return u},yv:function(){return c},XX:function(){return t},St:function(){return o},lW:function(){return i},dk:function(){return m},hm:function(){return d},AI:function(){return r},ig:function(){return v.ig}});let t="",a="/admin",i="/login",s="/applicants",r="/search",c="/favorites",o="/interviews",d="/results",u="/dashboard",m="people",p="companies",h="add",f="change-password",x="https://peoplein-api.habsida.com/graphql";var v=n(791),g=n(793)},791:function(e,l,n){"use strict";var t,a;n.d(l,{IN:function(){return t},OF:function(){return s},ig:function(){return i}}),(a=t||(t={})).IN_PROJECT="IN_PROJECT",a.SEARCHING="SEARCHING",a.EMPLOYED="EMPLOYED";let i=[{label:"",value:"STATUS",children:[{label:"Searching",value:t.SEARCHING},{label:"Employed",value:t.EMPLOYED},{label:"In project",value:t.IN_PROJECT}]}],s=[{label:"",value:"CV",children:[{label:"Open",value:"open"},{label:"Download",value:"download"},{label:"Delete",value:"delete"}]}]},4791:function(e,l,n){"use strict";n.r(l),n.d(l,{Breadcrumb:function(){return r}});var t=n(9268),a=n(6008);n(6168);var i=n(5846),s=n.n(i);let r=e=>{let{with_bg:l=!0}=e,n=(0,a.usePathname)(),i=n.split("/"),r=e=>n.split("/").slice(0,e+1).join("/");return(0,t.jsx)("div",{className:"".concat(l?"breadcrumb-bg":""," breadcrumb rounded flex items-center text-base font-medium"),children:(0,t.jsx)("div",{className:"routes ml-3",children:(()=>{let e=[];for(let l=1;l<=i.length;l++)1===l?e.push((0,t.jsx)(s(),{href:r(l),className:"active-route",children:"Home"},l)):e.push((0,t.jsx)(s(),{href:r(l),className:l!==i.length-1?"active-route capitalize":"capitalize",children:i[l]},l)),l<i.length-1&&e.push((0,t.jsx)("span",{children:" / "},l+10));return e})()})})}},9651:function(e,l,n){"use strict";n.d(l,{w:function(){return u}});var t=n(9268),a=n(6006),i=n(9173);let s=Math.PI/180;async function r(e,l,n){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=l.getContext("2d");if(!i)throw Error("No 2d context");let r=e.naturalWidth/e.width,c=e.naturalHeight/e.height,o=window.devicePixelRatio;l.width=Math.floor(n.width*r*o),l.height=Math.floor(n.height*c*o),i.scale(o,o),i.imageSmoothingQuality="high";let d=n.x*r,u=n.y*c,m=e.naturalWidth/2,p=e.naturalHeight/2;i.save(),i.translate(-d,-u),i.translate(m,p),i.rotate(a*s),i.scale(t,t),i.translate(-m,-p),i.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),i.restore()}n(8939),n(3429);let c=e=>{var l,n;let{file:s,onCropped:c,aspect:o=1,max_size:d}=e,[u,m]=(0,a.useState)(""),p=(0,a.useRef)(null),h=(0,a.useRef)(null),[f,x]=(0,a.useState)(),[v,g]=(0,a.useState)(),[j,N]=(0,a.useState)(1),[b,w]=(0,a.useState)(0),[k,y]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{s&&m(URL.createObjectURL(s)||"")},[s]),l=async()=>{(null==v?void 0:v.width)&&(null==v?void 0:v.height)&&h.current&&p.current&&r(h.current,p.current,v,j,b)},n=[v,j,b],(0,a.useEffect)(()=>{let e=setTimeout(()=>{l.apply(void 0,n)},100);return()=>{clearTimeout(e)}},n),(0,t.jsx)("div",{className:"image-cropper position absolute z-50 top-0 overflow-hidden  h-screen w-screen left-0 flex justify-center pt-5",children:(0,t.jsxs)("div",{className:"cropper-content opacity-1 bg-white p-4 flex items-center flex-col justify-center gap-4",children:[!!u&&(0,t.jsx)(i.ZP,{crop:f,onChange:(e,l)=>x(l),onComplete:e=>g(e),aspect:o,children:(0,t.jsx)("img",{className:"crop-image",ref:h,alt:"Crop me",src:u,style:{transform:"scale(".concat(j,") rotate(").concat(b,"deg)"),maxHeight:"450px",maxWidth:"480px"},onLoad:function(e){if(o){let{width:l,height:n}=e.currentTarget;x((0,i._H)((0,i.YG)({unit:"%",width:90},o,l,n),l,n))}}})}),!!v&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"hidden",children:(0,t.jsx)("canvas",{ref:p,style:{border:"1px solid black",objectFit:"contain",width:v.width,height:v.height}})})}),(0,t.jsxs)("div",{className:"Crop-Controls",children:[k&&d&&(0,t.jsxs)("span",{className:"text-red-400 text-sm",children:["Selected image is larger than ",d/8388608," MB"]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{type:"button",onClick:function(){if(!p.current)throw Error("Crop canvas does not exist");p.current.toBlob(e=>{if(!e)throw Error("Failed to create blob");d&&e.size>d?y(!0):(y(!1),c(new File([e],s.name)))})},children:"Crop Image"})})]})]})})},o=()=>(0,t.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M16 28V9",stroke:"#101828",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M7 18L16 9L25 18",stroke:"#101828",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M5 5H27",stroke:"#101828",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});var d=n(5596);let u=e=>{let{onChange:l,imagePath:n,aspect:i}=e,[s,r]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),p=e=>{e.target.files&&e.target.files.length>0&&r(e.target.files[0])},h=e=>{l(e),m(e),r(null)};return(0,t.jsxs)(a.Fragment,{children:[s&&(0,t.jsx)(c,{max_size:d.Tb,file:s,onCropped:h,aspect:i}),(0,t.jsxs)("div",{className:"w-full h-full relative  flex items-center justify-center",children:[(0,t.jsx)(o,{}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"cursor-pointer absolute opacity-0 w-full h-full z-20",onChange:p}),(0,t.jsx)("div",{className:"w-full h-full top-0 absolute z-10 overflow-hidden",children:(u||n)&&(0,t.jsx)("img",{className:"w-full h-full",src:u?URL.createObjectURL(u):n,alt:"Selected"})})]})]})}},7705:function(){},2901:function(){},6168:function(){},8939:function(){}}]);